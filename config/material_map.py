# ğŸ“„ ê±´ì„¤ ìì¬ â†’ íê¸°ë¬¼ ë¶„ë¥˜ ë° ìˆœí™˜ê³¨ì¬ ì¬í™œìš© ì •ë³´ ì„¤ì •
#
# âœ… ëª©ì :
# ì´ íŒŒì¼ì€ ì´ë¯¸ì§€ ë˜ëŠ” ìì¬ ì…ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ê±´ì„¤íê¸°ë¬¼ì˜ ë¶„ë¥˜ ë° ì¬í™œìš© ê°€ëŠ¥ ì—¬ë¶€ë¥¼ íŒë³„í•˜ê¸° ìœ„í•œ ê¸°ì¤€ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
# AI íƒì§€ ì‹œìŠ¤í…œ ë° í†µê³„ ë¶„ì„, ìˆœí™˜ê³¨ì¬ í™œìš© ë³´ê³ ì„œ ìë™í™” ë“± ì‹¤ë¬´ì— ì ìš© ê°€ëŠ¥í•œ ê¸°ì´ˆ ì •ë³´ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
#
# âœ… í¬í•¨ ê¸°ëŠ¥:
# 1. ì‚¬ìš©ì ì…ë ¥ ìì¬ëª… â†’ í‘œì¤€ í•œê¸€ ìì¬ëª… ì •ê·œí™”
# 2. í‘œì¤€ ìì¬ëª…ì— ë”°ë¥¸ íê¸°ë¬¼ ë¶„ë¥˜ëª…, íê¸°ë¬¼ê´€ë¦¬ë²• ê¸°ì¤€ ì½”ë“œ, ì¬í™œìš© ê°€ëŠ¥ ì—¬ë¶€ ì œê³µ
# 3. ìˆœí™˜ê³¨ì¬ë¡œ ì¬í™œìš© ê°€ëŠ¥í•œ ìì¬ ëª©ë¡ ë° í™œìš© ìš©ë„ ì •ì˜
#
# ğŸ“š ê³µì‹ ë ¥ ìˆëŠ” ì°¸ê³  ìë£Œ:
# - í™˜ê²½ë¶€ ã€Œíê¸°ë¬¼ê´€ë¦¬ë²• ì‹œí–‰ê·œì¹™ã€ ë³„í‘œ 1ì˜2 (ê±´ì„¤íê¸°ë¬¼ ë¶„ë¥˜ì½”ë“œ)
#   https://www.law.go.kr/lsInfoP.do?lsiSeq=206193&viewCls=lsRvsDocInfoR#0000
# - êµ­í† êµí†µë¶€ ê³ ì‹œ ì œ2010-397í˜¸: ìˆœí™˜ê³¨ì¬ ì˜ë¬´ì‚¬ìš© ê±´ì„¤ê³µì‚¬ì˜ ìš©ë„ ë° ì‚¬ìš©ë¹„ìœ¨
#   https://www.molit.go.kr/USR/I0204/m_45/dtl.jsp?idx=7109
# - í•œêµ­ìˆœí™˜ê³¨ì¬í˜‘íšŒ: ìˆœí™˜ê³¨ì¬ í’ˆì§ˆê¸°ì¤€ ë° ì¬í™œìš© ì‚¬ë¡€
#   https://kraa.or.kr/27
# - í•œêµ­í™˜ê²½ê³µë‹¨ ì˜¬ë°”ë¡œì‹œìŠ¤í…œ: ê±´ì„¤íê¸°ë¬¼ ì²˜ë¦¬ì •ë³´
#   https://www.allbaro.or.kr
#
# ğŸ¢ í™œìš© ì˜ˆì‹œ:
# - ì¬í™œìš© ê°€ëŠ¥ ìì¬ë§Œ í•„í„°ë§í•˜ì—¬ íƒ„ì†Œ ì €ê° ë³´ê³ ì„œ ì‘ì„±
# - YOLO íƒì§€ ê²°ê³¼ì—ì„œ ìì¬ë³„ íê¸°ë¬¼ ìœ í˜• ë° ì½”ë“œ ìë™ ë¶„ë¥˜
# - ìˆœí™˜ê³¨ì¬ ì ìš© ì‹œë®¬ë ˆì´ì…˜ ë° ì‹œê°í™” (ë„ë¡œ ë³´ì¡°ê¸°ì¸µ ë“±)

# âœ… ì‚¬ìš©ì ì…ë ¥ â†’ í‘œì¤€ ìì¬ëª… ì •ê·œí™” ë§¤í•‘
MATERIAL_ALIASES = {
    # ë²½ëŒ
    "brick":   "ë²½ëŒ", "bricks":  "ë²½ëŒ", "bricks ": "ë²½ëŒ", " wall":
               "ë²½ëŒ", "ë²½ëŒ":    "ë²½ëŒ",

    # ì½˜í¬ë¦¬íŠ¸
    "concrete":    "ì½˜í¬ë¦¬íŠ¸", "concretes":  "ì½˜í¬ë¦¬íŠ¸", "ì½˜í¬ë¦¬íŠ¸": "ì½˜í¬ë¦¬íŠ¸",

    # ìŠ¤í‹°ë¡œí¼
    "foam":    "ìŠ¤í‹°ë¡œí¼", "foams":    "ìŠ¤í‹°ë¡œí¼", "ìŠ¤í‹°ë¡œí¼": "ìŠ¤í‹°ë¡œí¼",

    # ì¡ìì¬ (general waste)
    "general_w":    "ì¡ìì¬", "general_ws":   "ì¡ìì¬", "general_waste": "ì¡ìì¬", "ì¡ìì¬": "ì¡ìì¬",

    # ì„ê³ ë³´ë“œ
    "gypsum board": "ì„ê³ ë³´ë“œ", "gypsumboards": "ì„ê³ ë³´ë“œ", "ì„ê³ ë³´ë“œ": "ì„ê³ ë³´ë“œ",

    # íŒŒì´í”„
    "pipe":    "íŒŒì´í”„", "pipes":     "íŒŒì´í”„", "pipess":   "íŒŒì´í”„", "íŒŒì´í”„": "íŒŒì´í”„",

    # í”Œë¼ìŠ¤í‹±
    "plastic": "í”Œë¼ìŠ¤í‹±", "plastics":  "í”Œë¼ìŠ¤í‹±", "í”Œë¼ìŠ¤í‹±": "í”Œë¼ìŠ¤í‹±",

    # ì„ì¬
    "stone":   "ì„ì¬", "stones":   "ì„ì¬", "ëŒ":     "ì„ì¬", "ì„ì¬": "ì„ì¬",

    # íƒ€ì¼
    "tile":    "íƒ€ì¼", "tiles":    "íƒ€ì¼", "íƒ€ì¼":   "íƒ€ì¼",

    # ëª©ì¬
    "wood":    "ëª©ì¬", "woods":    "ëª©ì¬", "ë‚˜ë¬´":   "ëª©ì¬", "ëª©ì¬": "ëª©ì¬"
}

# âœ… í‘œì¤€ ìì¬ëª… â†’ íê¸°ë¬¼ ë¶„ë¥˜ ì •ë³´
# "code"ëŠ” íê¸°ë¬¼ê´€ë¦¬ë²• ì‹œí–‰ê·œì¹™ ë³„í‘œ 1ì˜2ì— ë”°ë¥¸ êµ­ê°€ ê³µì¸ íê¸°ë¬¼ ë¶„ë¥˜ì½”ë“œì…ë‹ˆë‹¤.
# "recyclable"ì€ êµ­í† ë¶€ ê³ ì‹œ ë° ìˆœí™˜ê³¨ì¬í˜‘íšŒ ê¸°ì¤€ì— ë”°ë¥¸ ìˆœí™˜ê³¨ì¬ í™œìš© ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ëœ»í•©ë‹ˆë‹¤.
MATERIAL_TO_WASTE = {
    "ë²½ëŒ": {
        "type": "íë²½ëŒ",
        "code": "17-01-02",
        "recyclable": True
    },
    "ì½˜í¬ë¦¬íŠ¸": {
        "type": "íì½˜í¬ë¦¬íŠ¸",
        "code": "17-01-01",
        "recyclable": True
    },
    "ìŠ¤í‹°ë¡œí¼": {
        "type": "íí•©ì„±ìˆ˜ì§€",
        "code": "17-02-03",
        "recyclable": False
    },
    "ì¡ìì¬": {
        "type": "í˜¼í•©ê±´ì„¤íê¸°ë¬¼",
        "code": "17-09-04",
        "recyclable": False
    },
    "ì„ê³ ë³´ë“œ": {
        "type": "íë³´ë“œë¥˜",
        "code": "17-08-02",
        "recyclable": False
    },
    "íŒŒì´í”„": {
        "type": "íê¸ˆì†ë¥˜",
        "code": "17-04-05",
        "recyclable": False
    },
    "í”Œë¼ìŠ¤í‹±": {
        "type": "íí•©ì„±ìˆ˜ì§€",
        "code": "17-02-03",
        "recyclable": False
    },
    "ì„ì¬": {
        "type": "íì„ì¬",
        "code": "17-01-07",
        "recyclable": False
    },
    "íƒ€ì¼": {
        "type": "ííƒ€ì¼ ë° íë„ìê¸°",
        "code": "17-01-03",
        "recyclable": False
    },
    "ëª©ì¬": {
        "type": "íëª©ì¬",
        "code": "17-02-01",
        "recyclable": False
    }
}

# âœ… ìˆœí™˜ê³¨ì¬ë¡œ ì¬í™œìš© ê°€ëŠ¥í•œ ìì¬ë³„ í™œìš© ìš©ë„
# - ì¶œì²˜: êµ­í† êµí†µë¶€ ê³ ì‹œ ì œ2010-397í˜¸ ë° í•œêµ­ìˆœí™˜ê³¨ì¬í˜‘íšŒ ê¸°ì¤€
# - ì‹¤ì œ ì ìš© ì˜ˆ: ë„ë¡œê³µì‚¬ ë³´ì¡°ê¸°ì¸µ, ì„±í† ìš©, ë³µí† ì¬, ë˜ë©”ìš°ê¸°ì¬ ë“±
RECYCLABLE_USAGES = {
    "ì½˜í¬ë¦¬íŠ¸": ["ë„ë¡œ ë³´ì¡°ê¸°ì¸µ", "ë§¤ë¦½ì‹œì„¤ ë³µí† ", "ì„±í†  ë° ë³µí† ìš©", "ë˜ë©”ìš°ê¸°ì¬", "ìˆœí™˜ ì•„ìŠ¤ì½˜ ì›ë£Œ"],
    "ë²½ëŒ":     ["ì„±í†  ë° ë³µí† ìš©", "ë˜ë©”ìš°ê¸° ë° ë’·ì±„ì›€ìš©", "ë§¤ë¦½ì§€ ë³µí† ", "ê³¨ì¬ ëŒ€ì²´ì¬"],
    "ì•„ìŠ¤íŒ”íŠ¸": ["ë„ë¡œ í¬ì¥ìš© ìˆœí™˜ ì•„ìŠ¤íŒ”íŠ¸ ì½˜í¬ë¦¬íŠ¸ ì›ë£Œ", "ë³´ì¡°ê¸°ì¸µì¬", "ë™ìƒë°©ì§€ì¸µ", "ë„ë¡œ ìœ ì§€ë³´ìˆ˜ìš© ê³¨ì¬"]
}

# âœ… í—¬í¼ í•¨ìˆ˜ë“¤

def normalize_material_name(raw_name: str) -> str | None:
    """ì‚¬ìš©ì ì…ë ¥ ìì¬ëª…ì„ í‘œì¤€ ìì¬ëª…(í•œê¸€)ìœ¼ë¡œ ì •ê·œí™”"""
    return MATERIAL_ALIASES.get(raw_name.strip().lower())

def get_waste_info(material: str) -> dict | None:
    """
    ìì¬ëª…ì— ëŒ€í•œ íê¸°ë¬¼ ì •ë³´ ë°˜í™˜
    ë°˜í™˜ê°’ ì˜ˆì‹œ: {'type': 'íì½˜í¬ë¦¬íŠ¸', 'code': '17-01-01', 'recyclable': True}
    """
    return MATERIAL_TO_WASTE.get(material)

def is_recyclable(material: str) -> bool:
    """í•´ë‹¹ ìì¬ê°€ ìˆœí™˜ê³¨ì¬ë¡œ ì¬í™œìš© ê°€ëŠ¥í•œì§€ ì—¬ë¶€"""
    info = get_waste_info(material)
    return info.get("recyclable", False) if info else False

def get_recyclable_materials() -> list[str]:
    """ì „ì²´ ìì¬ ì¤‘ ì¬í™œìš© ê°€ëŠ¥í•œ ìì¬ëª… ë¦¬ìŠ¤íŠ¸"""
    return [m for m, info in MATERIAL_TO_WASTE.items() if info["recyclable"]]

def get_recyclable_usage(material: str) -> list[str]:
    """ìˆœí™˜ê³¨ì¬ë¡œ í™œìš© ê°€ëŠ¥í•œ ìì¬ì˜ ì ìš© ìš©ë„ ë°˜í™˜"""
    return RECYCLABLE_USAGES.get(material, [])
